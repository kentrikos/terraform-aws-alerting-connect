{"modules":[{"id":"66ef5239-c446-4196-aebf-1652fd456d13","type":"PlayPrompt","branches":[{"condition":"Success","transition":"6557d384-23e6-4bcb-b0ed-0944e90b14b4"}],"parameters":[{"name":"Text","value":"<speak><break time=\"2s\"/>This is an automated Incident Call.<break time=\"500ms\"/></speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":117,"y":413},"useDynamic":false}},{"id":"fdb0ee9f-ccd7-4da1-ac31-29b214f8da7e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"3f2eaa06-1e99-49f2-a786-5bceefc08302"}],"parameters":[{"name":"Text","value":"<speak><break time=\"500ms\"/>Incident resolved and deleted. Thank you and have a good night.</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1588,"y":95},"useDynamic":false}},{"id":"f77218be-e5de-4a0d-971d-c1b3dcd25ee3","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"fdb0ee9f-ccd7-4da1-ac31-29b214f8da7e"},{"condition":"Error","transition":"d1b335f2-a5b5-4d81-8c93-de9c6768b8f2"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-central-1:xxxx:function:ResolveCurrentIncident_AWSConnect"},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":1337,"y":93},"dynamicMetadata":{}},"target":"Lambda"},{"id":"1b5ba685-a939-4857-ae2d-cc16e9371caf","type":"PlayPrompt","branches":[{"condition":"Success","transition":"038bb79a-e8b7-4023-9eb0-5de1710c825b"}],"parameters":[{"name":"Text","value":"End of message.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":789,"y":149},"useDynamic":false}},{"id":"6557d384-23e6-4bcb-b0ed-0944e90b14b4","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"f2a1a868-f66d-4b5d-943b-34bf5c927949"},{"condition":"Error","transition":"d1b335f2-a5b5-4d81-8c93-de9c6768b8f2"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-central-1:xxxx:function:GetCurrentIncident_AWSConnect"},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":258,"y":137},"dynamicMetadata":{}},"target":"Lambda"},{"id":"038bb79a-e8b7-4023-9eb0-5de1710c825b","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"RepeatMessage","transition":"f2a1a868-f66d-4b5d-943b-34bf5c927949"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Escalate","transition":"fa8e02be-63eb-4558-9ce5-b2305614ae44"},{"condition":"NoMatch","transition":"3f2eaa06-1e99-49f2-a786-5bceefc08302"},{"condition":"Error","transition":"d1b335f2-a5b5-4d81-8c93-de9c6768b8f2"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"ResolveIncident","transition":"f77218be-e5de-4a0d-971d-c1b3dcd25ee3"}],"parameters":[{"name":"Text","value":"<speak>Press One to repeat the message or let me know what I can do for you next.</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"MajorIncident"},{"name":"BotAlias","value":"prod"},{"name":"BotRegion","value":"eu-west-1"}],"metadata":{"position":{"x":1024,"y":127},"conditionMetadata":[{"id":"a73a7954-0954-4a2c-96da-3d3edb69d65c","value":"RepeatMessage"},{"id":"684b3bd4-1d9a-4539-bb6b-97644ccdbda1","value":"Escalate"},{"id":"ff70d68d-032a-4b43-9116-9da9048a996e","value":"ResolveIncident"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"f2a1a868-f66d-4b5d-943b-34bf5c927949","type":"PlayPrompt","branches":[{"condition":"Success","transition":"1b5ba685-a939-4857-ae2d-cc16e9371caf"}],"parameters":[{"name":"Text","value":"$.External.message","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":546,"y":149},"useDynamic":false}},{"id":"3f2eaa06-1e99-49f2-a786-5bceefc08302","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1710,"y":577}}},{"id":"d1b335f2-a5b5-4d81-8c93-de9c6768b8f2","type":"PlayPrompt","branches":[{"condition":"Success","transition":"3f2eaa06-1e99-49f2-a786-5bceefc08302"}],"parameters":[{"name":"Text","value":"Error","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1719,"y":948},"useDynamic":false}},{"id":"fa8e02be-63eb-4558-9ce5-b2305614ae44","type":"PlayPrompt","branches":[{"condition":"Success","transition":"33cba142-b2b8-44b3-bd03-2159c079f9bf"}],"parameters":[{"name":"Text","value":"Incident is escalated to $.Lex.Slots.EscalationTarget","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1084,"y":668},"useDynamic":false}},{"id":"33cba142-b2b8-44b3-bd03-2159c079f9bf","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"3f2eaa06-1e99-49f2-a786-5bceefc08302"},{"condition":"Error","transition":"d1b335f2-a5b5-4d81-8c93-de9c6768b8f2"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-central-1:xxxx:function:Escalate_Incident_To"},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"escalationTarget","value":"$.Lex.Slots.EscalationTarget","namespace":null},{"name":"Parameter","key":"message","value":"$.External.message","namespace":null}],"metadata":{"position":{"x":1391,"y":656},"dynamicMetadata":{"escalationTarget":false,"message":false}},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"66ef5239-c446-4196-aebf-1652fd456d13","metadata":{"entryPointPosition":{"x":39,"y":126},"snapToGrid":false,"name":"LambdaCall","description":null,"type":"contactFlow","status":"published","hash":"c559d3f3e41334fc648c8a4774c48f2f918bdd039ac388d9cebed0d580af9b05"}}